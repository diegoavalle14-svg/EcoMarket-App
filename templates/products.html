{% extends "base.html" %}

{% block title %}Productos - EcoMarket{% endblock %}

{% block content %}

<div class="products-page-container">

    <!-- Panel de filtros -->
    <div class="filters-panel">
        <h3>Filtrar Productos</h3>
        <form method="get" action="/products">
            <label for="category">Categoría</label>
            <select name="category" id="category">
                <option value="">Todas</option>
                <option value="Plásticos" {% if category == 'Plásticos' %}selected{% endif %}>Plásticos</option>
                <option value="Vidrio" {% if category == 'Vidrio' %}selected{% endif %}>Vidrio</option>
                <option value="Papel" {% if category == 'Papel' %}selected{% endif %}>Papel</option>
                <option value="Metales" {% if category == 'Metales' %}selected{% endif %}>Metales</option>
                <option value="Electrónicos" {% if category == 'Electrónicos' %}selected{% endif %}>Electrónicos</option>
            </select>
            <button type="submit">Filtrar</button>
        </form>
    </div>

    <!-- Botón regresar flotante -->
    <div class="back-button-container">
        <a href="/" class="btn btn-back">Regresar</a>
    </div>


    <!-- Grid de productos -->
    <div class="products-grid">
        {% if products %}
            {% for product in products %}
            <div class="product-card">
                <img src="{{ product.image_url or '/static/default.png' }}" alt="{{ product.name }}">
                <h4>{{ product.name }}</h4>
                <p>{{ product.description or 'Sin descripción' }}</p>
                <p><b>Precio:</b> L. {{ product.price }}</p>
                <p><b>Stock:</b> {{ product.stock }}</p>
            </div>
            {% endfor %}
        {% else %}
            <p class="no-products-msg">No se han agregado productos en esta categoría.</p>
        {% endif %}
    </div>

</div>

{% endblock %}
